# 🚀 NASA Space Apps Challenge 2025  
## Find Your Friend - Exoplanet Disposition Prediction  
### 데이터 분석 및 모델 개발 보고서

---

## 🎯 프로젝트 목표

- **목표(Task):**  
  외계행성 탐색 데이터에서 각 객체의 **disposition** (행성 여부: Confirmed, Candidate, False Positive 등)을 예측
- **데이터 출처:**  
  NASA Exoplanet Archive ([https://exoplanetarchive.ipac.caltech.edu](https://exoplanetarchive.ipac.caltech.edu))
- **공통 전처리 기준:**
  - 상관계수 0.05 이상인 수치형 피처만 사용
  - 메타데이터(이름, ID, 코멘트 등) 제거
  - 정답(disposition)과 직접적으로 연관된 항목(예: score, disposition flag 등) 제외
  - 결측치 비율이 높은 열 제거

---

## 📊 1. K2 Planets and Candidates (K2p&c)
🔗 [Dataset Link](https://exoplanetarchive.ipac.caltech.edu/cgi-bin/TblView/nph-tblView?app=ExoTbls&config=k2pandc)

### 데이터 개요
- **샘플 수:** 약 4,000개  
- **특징 수:** 약 290개 (초기 4000여 개 항목 중 수치형만 사용)
- **목표:** disposition 예측  
  - Refuted는 데이터 수가 적어 제외

### 전처리 과정
| 단계 | 처리 내용 |
|------|------------|
| 1 | disposition 라벨 정리 및 Refuted 제외 |
| 2 | 수치형 피처만 선택 |
| 3 | 결측치 비율이 높은 피처 제거 |
| 4 | 상관계수 ≥ 0.05인 피처만 남김 |

<img width="918" height="418" alt="데이터 전처리 예시" src="https://github.com/user-attachments/assets/5b2c44a8-623b-4f43-adfc-34e8c905dfd9" />

### 분석 Task 구성
#### 🧩 Task 1: 이진분류  
- Confirmed + Candidate → 1  
- False Positive → 0  

#### 🧩 Task 2: 다중분류  
- Confirmed / Candidate / False Positive

#### 🧩 Task 3: 높은 상관관계 특징만 분석  
- 초기 268개 특징 → 최종 27개  
<img width="552" height="687" src="https://github.com/user-attachments/assets/f8c7538d-26cd-4c91-b5d0-af53fd8f5b97" />

---

## 📘 2. Cumulative Dataset  
🔗 [Dataset Link](https://exoplanetarchive.ipac.caltech.edu/cgi-bin/TblView/nph-tblView?app=ExoTbls&config=cumulative)

### 데이터 개요
- **샘플 수:** 약 9,600개  
- **특징 수:** 141개 → 전처리 후 41개  
- **주요 처리:**  
  - 높은 상관관계 피처만 사용  
  - 정답(disposition)과 직접 연결된 특징 제거  

<img width="569" height="658" src="https://github.com/user-attachments/assets/19cc9619-d534-4675-944b-337134cb45c1" />

> 상위 30개 주요 상관 피처 기반 예측 모델 수행

### 🧮 모델 성능
| Metric | Score |
|---------|--------|
| **AUC** | 0.994 |
| **F1** | 0.980 |
| **Precision** | 0.978 |
| **Recall** | 0.982 |

✅ **결론:**  
Cumulative 데이터셋은 상대적으로 피처 간 상관성이 높고 품질이 안정적이며, 이진 분류 기준에서 매우 높은 예측 성능을 보임.

---

## 🌌 3. TESS Objects of Interest (TOI)
🔗 [Dataset Link](https://exoplanetarchive.ipac.caltech.edu/cgi-bin/TblView/nph-tblView?app=ExoTbls&config=toi)

### 데이터 개요
- **샘플 수:** 약 7,699개  
- **특징 수:** 88개 → 전처리 후 16개
- **라벨 구성:**  
  ['FP', 'PC', 'KP', 'APC', 'FA', 'CP']

| 라벨 | 의미 | 통합 라벨 |
|-------|-------|-----------|
| CP, KP | Confirmed / Known Planet | 1 |
| PC, APC | Planetary Candidate / Ambiguous | Test |
| FA, FP | False Alarm / False Positive | 0 |

### 🧮 모델 성능
| Metric | Score |
|---------|--------|
| **AUC** | 0.844 |
| **F1** | 0.795 |
| **Precision** | 0.766 |
| **Recall** | 0.826 |

📉 **결론:**  
TESS 데이터는 태생적으로 불균형하고, 관측 신뢰도에 따라 라벨 변동성이 높음.  
하지만 16개 주요 피처만으로도 약 **AUC 0.84** 수준의 예측력을 확보함.

---

## 📈 종합 비교

| Dataset | Features Used | Task | AUC | F1 | Precision | Recall |
|----------|----------------|------|-----|------------|---------|
| **K2p&c** | 27 | Binary / Multi | - | - | - | - |
| **Cumulative** | 41 | Binary | **0.994** | **0.980** | **0.978** | **0.982** |
| **TOI** | 16 | Binary | 0.844 | 0.795 | 0.766 | 0.826 |

---

## 🧭 결론 및 향후 계획

- **현재 결과:**  
  - Cumulative Dataset 기반 이진 분류 모델이 가장 높은 예측 성능을 달성.
  - TOI Dataset은 불균형 및 라벨 모호성으로 상대적으로 낮은 정확도를 보임.
  - K2p&c Dataset은 상관관계 기반 특징 축소로 모델 경량화 가능성 확인.

- **향후 개선 방향:**  
  1. 3개 데이터셋의 **공통 특징 매핑 및 통합 학습 (Meta-Learning)**  
  2. 비선형 관계 탐지를 위한 **Gradient Boosting / LightGBM / XGBoost** 적용  
  3. 상관관계 기반이 아닌 **Feature Importance / SHAP 기반 선택**으로 재분석  
  4. TESS 데이터의 **라벨 신뢰도 가중치 학습(weighted training)** 도입  

---

📍 **작성자:** NASA Space Apps Challenge - Find Your Friend 팀 - seongjoon kim   
🧠 **분석 환경:** Python 3.8, Pandas, Scikit-learn, Matplotlib, Seaborn  
